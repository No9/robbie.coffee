// Generated by CoffeeScript 1.3.3
var fittest, i, launch_worker, run_sim, _i;

fittest = (new Simulation).random_dna();

launch_worker = function() {
  var worker1;
  worker1 = new Worker("/javascripts/robbie/worker.js");
  worker1.postMessage("");
  return worker1.onmessage = function(message) {
    if (message.dna != null) {
      return fittest = message.dna;
    } else {
      return console.log(message.data);
    }
  };
};

for (i = _i = 0; _i <= 1; i = ++_i) {
  launch_worker();
}

run_sim = function() {
  var animation_rate, count, s, step;
  s = new Simulation(fittest);
  s.display_canvas('board');
  animation_rate = 100;
  count = 0;
  step = function() {
    s.step();
    s.display_canvas('board');
    count++;
    console.log(count);
    if (count === 200) {
      return;
    }
    return setTimeout(step, animation_rate);
  };
  return step();
};

run_sim();
